---
layout: default
title: ssh config
---
Сегодня я расскажу как организую у себя хранение ssh ключей от разных серверов. Админю я кучу всего и запоминать где какой порт, пароль и юзер весьма неудобно, да и сами имена, а тем более ip серверов забываются.

Из софта нам понадобится собственно ssh и linux. Не пробуйте повторять это под вендой, за последствия я не ручаюсь. Я предупредил.

Прежде всего нужно завести простой файлик `~/.ssh/config` в котором пишем алиасы для серверов в следующем формате. На примере github.

    Host github
        User git
        Port 22
        HostName github.com
        IdentityFile ~/.ssh/github.key

Надеюсь дополнительного пояснения требует только последняя строчка. Она определяет ключ которым ходим на этот сервер. Подробнее в первой попавшейся статьи про основы ssh.

Теперь достаточно написать `ssh -T github` и мы знаем, что github на самом деле не предоставляет shell! Очень удобно!

Кажется всё хорошо и удобно, но нет предела совершенству. А если мы увеличим количество ключей до 10? а больше? Начинается реальная мешанина.

Нужно более красиво организовать хранение ключей. Я лично использую следующую уловку.

В config добавляются следующие строки:

    IdentityFile ~/.ssh/keys/%h/%r/id_rsa
    IdentityFile ~/.ssh/keys/%h/%r/id_dsa
    IdentityFile ~/.ssh/keys/%h/id_rsa
    IdentityFile ~/.ssh/keys/%h/id_dsa
    IdentityFile ~/.ssh/id_rsa
    IdentityFile ~/.ssh/id_dsa

теперь достаточно положить свои ключи в `.ssh/keys/github.com/git` и даже можно не указывать IdentityFile в алиасах для хостов.

Кстати, `%h = host, %r = remote_name`. Так что можете изобрести свой naming convention.

Другие полезные штуки можно узнать, набрав `man 5 ssh_config`

{{ page.date | date: "%d %B %Y" }}

[link to this post]({% post_url 2013-04-15-ssh %})
